<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="Assets/fontawesome-free-5.14.0-web/css/all.min.css">

    <title>Your Weather Dashboard!</title>
</head>

<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="col-sm-12 text-center h1" style="color: white;">Weather Dashboard</div>
        <!-- navbar-text mb-0-->
    </nav>

    <div class="row">
        <div class="col-sm-3">
            <span class="h4" style="margin-left: 10px;">Search for a City:</span>
            <form class="form-inline" style="margin-left: 10px; margin-top: 10px;">
                <input id="city-search" class="form-control mr-sm-2" type="search" placeholder="" aria-label="Search">
                <button id="btn-search" class="btn btn-primary " type="submit"><i class="fas fa-search"
                        style="color:white;"></i></button>
            </form>
            <div id="city-buttons" style="margin-left: 10px; margin-top: 20px;">
                <button type="button" class="btn btn-outline-secondary btn-lg btn-block text-left"
                    style="margin-top: -0px;">Austin</button>
                <button type="button" class="btn btn-outline-secondary btn-lg btn-block text-left"
                    style="margin-top: -0px;">Chicago</button>
                <button type="button" class="btn btn-outline-secondary btn-lg btn-block text-left"
                    style="margin-top: -0px;">New York</button>
                <button type="button" class="btn btn-outline-secondary btn-lg btn-block text-left"
                    style="margin-top: -0px;">Orlando</button>
            </div>
        </div>
        <div class="col-sm-9">
            <div class="row" style="margin-left: 20px;">
                <div class="card" style=" margin-top: 20px;">
                    <!--width: 100%; -->
                    <div class="card-body">
                        <span id="city-name" class="h2">Atlanta (8/15/2019)</span>
                        <img id="city-icon" src="Assets/weather-icons/sunny.png"
                            style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                        <p class="card-text">Temperature: <span id="city-temp">90.9 degF</span></p>
                        <p class="card-text">Humidity: <span id="city-humidity">41%</span></p>
                        <p class="card-text">Wind Speed: <span id="city-wind-speed">4.7 MPH</span></p>
                        <p class="card-text">UV Index: <span id="city-uv-index" class="badge badge-danger"
                                style="line-height: 20px; width: 40px; margin-bottom: 15px">9.49</span></p>

                    </div>
                </div>
            </div>
            <div class="row" style="margin-left: 20px;">
                <span class="h3" style="margin-top: 20px;">5-Day Forecast:</span>
            </div>
            <div class="row" style="margin-left: 20px;">
                <div class="card-deck">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body">
                            <h5 id="day-one-date" class="card-title">8/16/2019</h5>
                            <img id="day-one-icon" src="Assets/weather-icons/sunny.png"
                                style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                            <p class="card-text">Temp: <span id="day-one-temp">86.84 degF</span></p>
                            <p class="card-text">Humidity: <span id="day-one-humidity">43%</span></p>
                        </div>
                    </div>
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body">
                            <h5 id="day-two-date" class="card-title">8/16/2019</h5>
                            <img id="day-two-icon" src="Assets/weather-icons/sunny.png"
                                style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                            <p class="card-text">Temp: <span id="day-two-temp">86.84 degF</span></p>
                            <p class="card-text">Humidity: <span id="day-two-humidity">43%</span></p>
                        </div>
                    </div>
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body">
                            <h5 id="day-three-date" class="card-title">8/16/2019</h5>
                            <img id="day-three-icon" src="Assets/weather-icons/sunny.png"
                                style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                            <p class="card-text">Temp: <span id="day-three-temp">86.84 degF</span></p>
                            <p class="card-text">Humidity: <span id="day-three-humidity">43%</span></p>
                        </div>
                    </div>
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body">
                            <h5 id="day-four-date" class="card-title">8/16/2019</h5>
                            <img id="day-four-icon" src="Assets/weather-icons/sunny.png"
                                style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                            <p class="card-text">Temp: <span id="day-four-temp">86.84 degF</span></p>
                            <p class="card-text">Humidity: <span id="day-four-humidity">43%</span></p>
                        </div>
                    </div>
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body">
                            <h5 id="day-five-date" class="card-title">8/16/2019</h5>
                            <img id="day-five-icon" src="Assets/weather-icons/sunny.png"
                                style="height: 50px; width: 50px; margin-top: 10px; margin-bottom: 20px;"></img>
                            <p class="card-text">Temp: <span id="day-five-temp">86.84 degF</span></p>
                            <p class="card-text">Humidity: <span id="day-five-humidity">43%</span></p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>






    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">


        function populateData(response) { // populate city name, date, temp, humidity, wind speed, and uv index
            var day = moment.unix(response.dt);
            $("#city-name").text(response.name + " (" + (day._d.getMonth()+1) + "/" + day._d.getDate() + "/" + day._d.getFullYear() + ")");
            $("#city-temp").text(parseInt((response.main.temp - 273.15) * 9 / 5 + 32)); // convert kelvin to F
            $("#city-humidity").text(parseInt(response.main.humidity));
            $("#city-wind-speed").text((response.wind.speed * 2.237).toFixed(1)); // meters per second * 2.237 = miles per hour
            $("#city-icon").attr("src", "http://openweathermap.org/img/wn/" + response.weather[0].icon + "@2x.png");
        }

        function getCityData(citySearch) {
            var apiKey = "10e276ba99d3e4a1b4c1dd84964c3f93";
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=Atlanta&appid=d85c0fa84df93dc9e2c51749f4580b7e";

            //"api.openweathermap.org/data/2.5/weather?q=Austin&appid=" + "10e276ba99d3e4a1b4c1dd84964c3f93";



            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                //if response is good
                // if (response.hasProperty) {
                localStorage.setItem(response.name, JSON.stringify(response));
                populateData(response);

                // }
            });


        }


        $("#btn-search").on("click", function (event) {
            event.preventDefault();
            console.log("SEARCHING");
            var citySearch = $("#city-search").val().trim();
            if (citySearch != "") {
                console.log(citySearch);
                getCityData(citySearch);
            }
        })



    </script>
</body>

</html>